{% extends "index.html" %}
{% load static %}

{% block content %}
<section class="content">
  <div class="row">
    <section class="col-lg-12 connectedSortable">
      <div class="box box-primary">
        <div class="box-header">
          <i class="glyphicon glyphicon-plus"></i>
          <h3 class="box-title">
            <a href="/product/show">Add Product</a>
            {% if messages %}
              {% for message in messages %}
                <span style="margin-left:140px; color:red;">{{ message }}</span>
              {% endfor %}
            {% endif %}
          </h3>
        </div>

        <div class="box-body">
          <table class="table">
            <thead>
              <tr>
                <th>Id</th>
                <th>Product Name</th>
                <th>Barcode</th>
                <th>Sell Price</th>
                <th>Unit In Stock</th>
                <th>Category</th>
                <th>Photo</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              {% for item in products %}
              <tr>
                <td>{{ item.id }}</td>
                <td>{{ item.product_name }}</td>
                <td>{{ item.bar_code }}</td>
                <td>{{ item.sell_price }}</td>
                <td>{{ item.unit_in_stock }}</td>
                <td>{{ item.category.category_name }}</td>
                <td>
                  {% if item.photo %}
                    <img src="{{ item.photo.url }}" alt="{{ item.product_name }}" width="50" height="50">
                  {% else %}
                    No Photo
                  {% endif %}
                </td>
                <td>
                 <a href="{% url 'edit_product' item.id %}" class="glyphicon glyphicon-pencil btn btn-primary">Edit</a>

                    <a href="{% url 'delete_product' item.id %}" class="glyphicon glyphicon-trash btn btn-danger">Delete</a>

                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

        <div class="box-footer clearfix no-border">
          <div>
            <p>Item Count: {{ count_item }}</p>
            <p>Page {{ products.number }} of {{ products.paginator.num_pages }}</p>
          </div>
          <ul class="pagination">
            {% if products.has_previous %}
              <li><a href="?page=1" style="color:white;background-color:green;">&laquo; first</a></li>
              <li><a href="?page={{ products.previous_page_number }}" style="color:white;background-color:mediumblue;">previous</a></li>
            {% else %}
              <li><a style="color:white;background-color:gray;">previous</a></li>
            {% endif %}
            {% for i in products.paginator.page_range %}
              {% if products.number == i %}
                <li><a href="#" style="color:white;background-color:blue;">{{ i }}</a></li>
              {% else %}
                <li><a href="?page={{ i }}" style="color:black;">{{ i }}</a></li>
              {% endif %}
            {% endfor %}
            {% if products.has_next %}
              <li><a href="?page={{ products.next_page_number }}" style="color:white;background-color:green;">next</a></li>
              <li><a href="?page={{ products.paginator.num_pages }}" style="color:white;background-color:mediumblue;">last &raquo;</a></li>
            {% endif %}
          </ul>
        </div>
      </div>
    </section>
  </div>
</section>
{% endblock %}
