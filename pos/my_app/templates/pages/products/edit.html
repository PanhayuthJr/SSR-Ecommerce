{% extends "index.html" %}
{% load static %}
{% block content %}
<section class="content">
  <div class="row">
    <section class="col-lg-12 connectedSortable">
      <div class="box box-primary">
        <div class="box-header">
          <i class="glyphicon glyphicon-plus"></i>
          <h3 class="box-title">
            <a class="text-success">Edit Product</a>
            {% if messages %}
              {% for message in messages %}
                <span class="text-success" style="margin-left: 144px">{{ message }}</span>
              {% endfor %}
            {% endif %}
          </h3>
        </div>

        <div class="box-body">
          <form class="form-horizontal" action="/product/update_by_id/{{ product.id }}/" method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <!-- Product Name -->
            <div class="form-group">
              <label class="control-label col-sm-2">Product Name:</label>
              <div class="col-sm-4">
                <input type="text" name="product_name" value="{{ product.product_name }}" class="form-control" required>
              </div>
            </div>

            <!-- Barcode -->
            <div class="form-group">
              <label class="control-label col-sm-2">Barcode:</label>
              <div class="col-sm-4">
                <input type="number" name="bar_code" value="{{ product.bar_code }}" class="form-control" required>
              </div>
            </div>

            <!-- Sell Price -->
            <div class="form-group">
              <label class="control-label col-sm-2">Sell Price:</label>
              <div class="col-sm-4">
                <input type="number" step="0.01" name="sell_price" value="{{ product.sell_price }}" class="form-control" required>
              </div>
            </div>

            <!-- Unit In Stock -->
            <div class="form-group">
              <label class="control-label col-sm-2">Unit in Stock:</label>
              <div class="col-sm-4">
                <input type="number" name="unit_in_stock" value="{{ product.unit_in_stock }}" class="form-control" required>
              </div>
            </div>

            <!-- Category Dropdown -->
            <div class="form-group">
              <label class="control-label col-sm-2">Category:</label>
              <div class="col-sm-4">
                <select name="category_id" class="form-control" required>
                  <option value="">Select Category</option>
                  {% for cat in categories %}
                    <option value="{{ cat.id }}" {% if cat.id == product.category.id %}selected{% endif %}>{{ cat.category_name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>

            <!-- Product Photo -->
            <div class="form-group">
              <label class="control-label col-sm-2">Photo:</label>
              <div class="col-sm-4">
                <input type="file" name="photo" class="form-control">
                {% if product.photo %}
                  <br>
                  <img src="{{ product.photo.url }}" alt="Product Photo" width="120" style="border:1px solid #ccc;">
                {% endif %}
              </div>
            </div>

            <!-- Submit -->
            <div class="form-group">
              <div class="col-sm-offset-2 col-sm-10">
                <button type="submit" class="btn btn-primary">Update</button>
                <a href="/product/index" class="text-primary">Back to Product List</a>
              </div>
            </div>
          </form>
        </div>

      </div>
    </section>
  </div>
</section>
{% endblock %}
